<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>ROS2 Development | ROS2 å¼€å‘</title><meta name="description" content="ROS2 å¼€å‘æ–‡æ¡£">
    <link rel="preload" href="/ros2-development/assets/style-9acb78e7.css" as="style"><link rel="stylesheet" href="/ros2-development/assets/style-9acb78e7.css">
    <link rel="modulepreload" href="/ros2-development/assets/app-706704df.js"><link rel="modulepreload" href="/ros2-development/assets/index.html-745f6f64.js"><link rel="modulepreload" href="/ros2-development/assets/index.html-32effe75.js"><link rel="prefetch" href="/ros2-development/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/ros2-development/assets/404.html-16885e33.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a aria-current="page" href="/ros2-development/" class="router-link-active router-link-exact-active"><!----><span class="site-name">ROS2 å¼€å‘</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">ROS2 Development <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/ros2-development/#å®‰è£…" class="router-link-active router-link-exact-active sidebar-item" aria-label="å®‰è£…"><!--[--><!--]--> å®‰è£… <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/ros2-development/#apt-å®‰è£…" class="router-link-active router-link-exact-active sidebar-item" aria-label="apt å®‰è£…"><!--[--><!--]--> apt å®‰è£… <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#docker-å®‰è£…" class="router-link-active router-link-exact-active sidebar-item" aria-label="docker å®‰è£…"><!--[--><!--]--> docker å®‰è£… <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#åœ¨-jetson-nano-ä¸Šå®‰è£…-ros2" class="router-link-active router-link-exact-active sidebar-item" aria-label="åœ¨ Jetson Nano ä¸Šå®‰è£… ROS2"><!--[--><!--]--> åœ¨ Jetson Nano ä¸Šå®‰è£… ROS2 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#vscode-æ’ä»¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="VSCode æ’ä»¶"><!--[--><!--]--> VSCode æ’ä»¶ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/ros2-development/#ros2-åŸºç¡€" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 åŸºç¡€"><!--[--><!--]--> ROS2 åŸºç¡€ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/ros2-development/#ros2-èŠ‚ç‚¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 èŠ‚ç‚¹"><!--[--><!--]--> ROS2 èŠ‚ç‚¹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ros2-è¯é¢˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 è¯é¢˜"><!--[--><!--]--> ROS2 è¯é¢˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ros2-æœåŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 æœåŠ¡"><!--[--><!--]--> ROS2 æœåŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ros2-å‚æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 å‚æ•°"><!--[--><!--]--> ROS2 å‚æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ros2-åŠ¨ä½œ" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROS2 åŠ¨ä½œ"><!--[--><!--]--> ROS2 åŠ¨ä½œ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/ros2-development/#åˆ›å»º-ros-åŒ…" class="router-link-active router-link-exact-active sidebar-item" aria-label="åˆ›å»º ROS åŒ…"><!--[--><!--]--> åˆ›å»º ROS åŒ… <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/ros2-development/#ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-python" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (Python)"><!--[--><!--]--> ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (Python) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-c" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (C++)"><!--[--><!--]--> ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (C++) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-python" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (Python)"><!--[--><!--]--> ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (Python) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-c" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (C++)"><!--[--><!--]--> ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (C++) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#è‡ªå®šä¹‰æ¥å£-msg-srv" class="router-link-active router-link-exact-active sidebar-item" aria-label="è‡ªå®šä¹‰æ¥å£ msg srv"><!--[--><!--]--> è‡ªå®šä¹‰æ¥å£ msg srv <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#è‡ªå®šä¹‰å‚æ•°-python" class="router-link-active router-link-exact-active sidebar-item" aria-label="è‡ªå®šä¹‰å‚æ•° (Python)"><!--[--><!--]--> è‡ªå®šä¹‰å‚æ•° (Python) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/ros2-development/#è‡ªå®šä¹‰å‚æ•°-c" class="router-link-active router-link-exact-active sidebar-item" aria-label="è‡ªå®šä¹‰å‚æ•° (C++)"><!--[--><!--]--> è‡ªå®šä¹‰å‚æ•° (C++) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/ros2-development/#å¯åŠ¨æ–‡ä»¶-launch" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¯åŠ¨æ–‡ä»¶ launch"><!--[--><!--]--> å¯åŠ¨æ–‡ä»¶ launch <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ros2-development" tabindex="-1"><a class="header-anchor" href="#ros2-development" aria-hidden="true">#</a> ROS2 Development</h1><p>ä¸‹è½½ <a href="https://github.com/ros2/ros2/releases" target="_blank" rel="noopener noreferrer">ROS2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Documentation is at https://docs.ros.org</p><h2 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h2><p>æ¨è apt å®‰è£…ï¼Œdocker å®‰è£…ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ docker é»˜è®¤ä¸æ”¯æŒå›¾å½¢ç•Œé¢</p><h3 id="apt-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#apt-å®‰è£…" aria-hidden="true">#</a> apt å®‰è£…</h3><ol><li>é¦–å…ˆç¡®ä¿ç¯å¢ƒæ”¯æŒUTF-8</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>locale  <span class="token comment"># æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®‰è£…æœ‰UTF-8</span>
<span class="token comment"># å¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œå®‰è£…</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> locales
<span class="token function">sudo</span> locale-gen en_US en_US.UTF-8
<span class="token function">sudo</span> update-locale <span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.UTF-8 <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
locale  <span class="token comment"># å®‰è£…å¥½åå†æ¬¡æ£€æŸ¥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>è®¾ç½®æº</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ·»åŠ aptä»“åº“</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">curl</span> gnupg2 lsb-release
<span class="token function">curl</span> http://repo.ros2.org/repos.key <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&#39;echo &quot;deb http://packages.ros.org/ros2/ubuntu `lsb_release -cs` main&quot; &gt; /etc/apt/sources.list.d/ros2-latest.list&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>å®‰è£…package è®¾ç½®è½¯ä»¶æº</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&#39;echo &quot;deb [arch=amd64,arm64] http://packages.ros.org/ros2/ubuntu bionic main&quot; &gt; /etc/apt/sources.list.d/ros2-latest.list&#39;</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ros-foxy-desktop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>è¿è¡Œå®ä¾‹</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å¹¶é…ç½®ç¯å¢ƒ</span>
<span class="token builtin class-name">source</span> /opt/ros/foxy/setup.bash
<span class="token comment"># è¿è¡ŒC++ talker</span>
ros2 run demo_nodes_cpp talker

<span class="token comment"># ç„¶åæ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯å¹¶é…ç½®ç¯å¢ƒ</span>
<span class="token builtin class-name">source</span> /opt/ros/foxy/setup.bash
<span class="token comment"># è¿è¡ŒC++ listener</span>
ros2 run demo_nodes_py listener
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æå‰å®‰è£… <code>rosdep</code> å’Œ <code>colcon</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> python3-colcon-common-extensions
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-rosdep2
<span class="token function">sudo</span> rosdep init <span class="token comment"># éœ€è¦ğŸªœ </span>
rosdep update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£… <code>rosdep</code> æ—¶ï¼Œå¦‚æœå‡ºç°ç½‘ç»œé”™è¯¯ï¼Œ<code>/etc/hosts</code> ï¼Œæ·»åŠ  ip æ˜ å°„</p><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>185.199.110.133 raw.githubusercontent.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç½‘ä¸å¥½ï¼Œç¼–è¾‘ <code>/etc/ros/rosdep/sources.list.d/20-default.list</code> æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># os-specific listings first</span>
yaml hhttps://mirrors.tuna.tsinghua.edu.cn/github-raw/ros/rosdistro/master/rosdep/osx-homebrew.yaml osx

<span class="token comment"># generic</span>
yaml hhttps://mirrors.tuna.tsinghua.edu.cn/github-raw/ros/rosdistro/master/rosdep/base.yaml
yaml hhttps://mirrors.tuna.tsinghua.edu.cn/github-raw/ros/rosdistro/master/rosdep/python.yaml
yaml hhttps://mirrors.tuna.tsinghua.edu.cn/github-raw/ros/rosdistro/master/rosdep/ruby.yaml
gbpdistro hhttps://mirrors.tuna.tsinghua.edu.cn/github-raw/ros/rosdistro/master/releases/fuerte.yaml fuerte

<span class="token comment"># newer distributions (Groovy, Hydro, ...) must not be listed anymore, they are being fetched from the rosdistro index.yaml instead</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£… python ä¾èµ–</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip3 uninstall empy <span class="token parameter variable">-y</span>
pip3 <span class="token function">install</span> empy lark numpy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#docker-å®‰è£…" aria-hidden="true">#</a> docker å®‰è£…</h3><p>é€šè¿‡ docker å®‰è£…ï¼Œé¦–å…ˆå®‰è£… docker</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> docker.io
systemctl start <span class="token function">docker</span>  <span class="token comment"># å®‰è£…å®Œæˆåå¯åŠ¨docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span> <span class="token comment"># è®¾ç½®å¼€æœºå¯åŠ¨</span>
<span class="token function">docker</span> version          <span class="token comment"># æŸ¥çœ‹dockerç‰ˆæœ¬</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯é root ç”¨æˆ·ï¼Œéœ€è¦å°†ç”¨æˆ·åŠ å…¥ docker ç”¨æˆ·ç»„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token function">docker</span>
<span class="token function">sudo</span> gpasswd <span class="token parameter variable">-a</span> <span class="token variable">${<span class="token environment constant">USER</span>}</span> <span class="token function">docker</span>
<span class="token function">groups</span> <span class="token environment constant">$USER</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡é…ç½® <code>/etc/docker/daemon.json</code> æ–‡ä»¶æ¥é…ç½® docker é•œåƒåŠ é€Ÿ</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæ‰§è¡Œ <code>sudo systemctl restart docker</code> â€‹é‡å¯å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p><a href="https://hub.docker.com/_/ros/" target="_blank" rel="noopener noreferrer">å®˜æ–¹ ROS é•œåƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ <a href="https://github.com/osrf/docker_images" target="_blank" rel="noopener noreferrer">OSRF Docker Images<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå·²ç»å†™å¥½äº†ä¸€ä¸ª <code>Dockerfile.ros-desktop.foxy.jammy</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-f</span> docker/containers/Dockerfile.ros-desktop.foxy.jammy <span class="token parameter variable">-t</span> ros2:v1 <span class="token builtin class-name">.</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> ros2:v1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡ŒROSå°æµ·é¾Ÿ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 run turtlesim turtlesim_node
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½†æ˜¯ç”±äº docker é»˜è®¤ä¸æ”¯æŒå›¾å½¢ç•Œé¢ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä¸€ä¸‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> x11-xserver-utils
xhost + <span class="token comment"># æ¯æ¬¡å¼€æœºéƒ½è¦è¿è¡Œ</span>
<span class="token comment">#è¾“å‡ºä¸ºï¼šaccess control disabled, clients can connect from any host</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œ <code>-d</code> åå°è¿è¡Œï¼Œ<code>-it</code> äº¤äº’å¼è¿è¡Œï¼Œ<code>-v</code> æŒ‚è½½ç›®å½•ï¼Œ<code>-e</code> è®¾ç½®ç¯å¢ƒå˜é‡</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-it</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-v</span> /etc/localtime:/etc/localtime:ro <span class="token punctuation">\</span>
    <span class="token parameter variable">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable"><span class="token environment constant">DISPLAY</span></span><span class="token operator">=</span>unix<span class="token environment constant">$DISPLAY</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> GDK_SCALE <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> GDK_DPI_SCALE <span class="token punctuation">\</span>
    ros2:v1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åœ¨-jetson-nano-ä¸Šå®‰è£…-ros2" tabindex="-1"><a class="header-anchor" href="#åœ¨-jetson-nano-ä¸Šå®‰è£…-ros2" aria-hidden="true">#</a> åœ¨ Jetson Nano ä¸Šå®‰è£… ROS2</h3><p>Jetson Nano å®‰è£… ROS2 åªèƒ½é€šè¿‡ docker å®‰è£…ï¼Œå‚è€ƒé¡¹ç›® <a href="https://github.com/dusty-nv/ros_deep_learning" target="_blank" rel="noopener noreferrer"><code>dusty-nv/ros_deep_learning</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å°†ç”¨æˆ·åŠ å…¥ docker ç”¨æˆ·ç»„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> gpasswd <span class="token parameter variable">-a</span> <span class="token variable">${<span class="token environment constant">USER</span>}</span> <span class="token function">docker</span>
<span class="token function">groups</span> <span class="token environment constant">$USER</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡é…ç½® <code>/etc/docker/daemon.json</code> æ–‡ä»¶æ¥é…ç½® docker é•œåƒåŠ é€Ÿ</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæ‰§è¡Œ <code>sudo systemctl restart docker</code> â€‹é‡å¯å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>å®‰è£…æ—¶å‚è€ƒ <a href="http://dev.ros2.fishros.com/doc/Releases.html" target="_blank" rel="noopener noreferrer">ROS2 ç‰ˆæœ¬æ”¯æŒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå…·ä½“é•œåƒåœ¨ <a href="https://github.com/dusty-nv/jetson-containers" target="_blank" rel="noopener noreferrer"><code>dusty-nv/jetson-containers</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œä¿®æ”¹ <code>docker/tag.sh</code> ä¸­ <code>CONTAINER_IMAGE</code> æˆ–è€…åœ¨è¿è¡Œæ—¶æŒ‡å®š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">bash</span> docker/run-nano.sh <span class="token comment"># é»˜è®¤ --ros humble, -y è·³è¿‡ç¡®è®¤</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿›å…¥å®¹å™¨åï¼Œè¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 launch <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>launch_file<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>launch_arguments<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="vscode-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#vscode-æ’ä»¶" aria-hidden="true">#</a> VSCode æ’ä»¶</h3><p>å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=ms-iot.vscode-ros" target="_blank" rel="noopener noreferrer">ROS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè°ƒå‡ºå‘½ä»¤ <code>ctrl/cmd + shift + p </code></p><ul><li><code>ROS: Update C++ Properties</code>: è‡ªåŠ¨æ›´æ–° <code>.vscode/c_cpp_properties.json</code> ä¸­ C++ é…ç½®ï¼Œå¤´æ–‡ä»¶ç›®å½•ç­‰</li><li><code>ROS: Update Python Path</code>: è‡ªåŠ¨æ›´æ–° <code>.vscode/settings.json</code> ä¸­ Python åŒ…è·¯å¾„</li></ul><h2 id="ros2-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#ros2-åŸºç¡€" aria-hidden="true">#</a> ROS2 åŸºç¡€</h2><p><a href="http://dev.ros2.fishros.com" target="_blank" rel="noopener noreferrer">ROS2 ä¸­æ–‡ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="ros2-èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#ros2-èŠ‚ç‚¹" aria-hidden="true">#</a> ROS2 èŠ‚ç‚¹</h3><p>ROS å›¾æ˜¯ ROS2 å…ƒç´ åŒæ—¶å¤„ç†æ•°æ®çš„ç½‘ç»œã€‚å®ƒåŒ…å«æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶ä»¥åŠå®ƒä»¬ä¹‹é—´çš„è¿æ¥ (å¦‚æœè¦å°†å®ƒä»¬å…¨éƒ¨æ˜ å°„å¹¶å¯è§†åŒ–)ã€‚</p><p>ROS ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹åº”è´Ÿè´£å•ä¸ªæ¨¡å—ç›®çš„ (ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºæ§åˆ¶è½¦è½®ç”µæœºçš„èŠ‚ç‚¹ï¼Œä¸€ä¸ªç”¨äºæ§åˆ¶æ¿€å…‰æµ‹è·ä»ªçš„èŠ‚ç‚¹ç­‰)ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥é€šè¿‡è¯é¢˜ã€æœåŠ¡ã€åŠ¨ä½œæˆ–å‚æ•°å‘å…¶ä»–èŠ‚ç‚¹å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„æœºå™¨äººç³»ç»Ÿç”±è®¸å¤šååŒå·¥ä½œçš„èŠ‚ç‚¹ç»„æˆã€‚åœ¨ ROS2 ä¸­ï¼Œå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ (cprogramç¨‹åºã€Pythonç¨‹åºç­‰) å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ã€‚</p><p><img src="/ros2-development/assets/Nodes-TopicandService-7208a196.gif" alt="ROS2"></p><p>ROS2 å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 run <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>executable_name<span class="token operator">&gt;</span>
ros2 run turtlesim turtlesim_node <span class="token comment"># å¯åŠ¨å°æµ·é¾Ÿ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶ä¸çŸ¥é“èŠ‚ç‚¹åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>ros2 node list</code> æ‰¾åˆ°èŠ‚ç‚¹åç§°</p><p>å½“ turtlesim ä»åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œæ—¶ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡º <code>/turtlesim</code> ï¼Œè¿™æ˜¯ turtlesim èŠ‚ç‚¹çš„åç§°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 <span class="token function">node</span> list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å†æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å¯åŠ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ <code>ros2 run turtlesim turtle_teleop_key</code> ï¼Œç„¶åå†æ¬¡è¿è¡Œ <code>ros2 node list</code> ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡º <code>turtlesim_node</code> å’Œ <code>/teleop_turtle</code></p><p>è®¿é—®ç»“ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°èŠ‚ç‚¹çš„åç§°ã€ç±»å‹ã€å‘å¸ƒçš„è¯é¢˜ã€è®¢é˜…çš„è¯é¢˜ã€æä¾›çš„æœåŠ¡ã€ä½¿ç”¨çš„æœåŠ¡ã€ä½¿ç”¨çš„å‚æ•°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 <span class="token function">node</span> info /turtlesim
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ros2-è¯é¢˜" tabindex="-1"><a class="header-anchor" href="#ros2-è¯é¢˜" aria-hidden="true">#</a> ROS2 è¯é¢˜</h3><p>ROS2 å°†å¤æ‚çš„ç³»ç»Ÿåˆ†è§£æˆè®¸å¤šæ¨¡å—åŒ–èŠ‚ç‚¹ï¼Œ<strong>è¯é¢˜ (Topic)</strong> æ˜¯ ROS2 ä¸­æœ€å¸¸ç”¨çš„é€šä¿¡æœºåˆ¶ï¼Œå®ƒå……å½“èŠ‚ç‚¹äº¤æ¢æ¶ˆæ¯çš„æ€»çº¿ï¼Œæ˜¯ä¸€ç§<strong>å‘å¸ƒ/è®¢é˜…æœºåˆ¶</strong>ã€‚è¯é¢˜æ˜¯æ•°æ®åœ¨èŠ‚ç‚¹ä¹‹é—´ç§»åŠ¨ï¼Œä»è€Œåœ¨ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†ä¹‹é—´ç§»åŠ¨çš„ä¸»è¦æ–¹å¼ä¹‹ä¸€ã€‚</p><p>èŠ‚ç‚¹å¯ä»¥å°†æ•°æ®å‘å¸ƒåˆ°ä»»æ„æ•°é‡çš„è¯é¢˜ï¼ŒåŒæ—¶è®¢é˜…ä»»æ„æ•°é‡çš„è¯é¢˜ã€‚</p><p><img src="/ros2-development/assets/Topic-SinglePublisherandSingleSubscriber-c6807a8b.gif" alt="Topic-SPSS"><img src="/ros2-development/assets/Topic-MultiplePublisherandMultipleSubscriber-0202230c.gif" alt="Topic-MPMS"></p><p>åœ¨æ–°ç»ˆç«¯ä¸­è¿è¡Œ <code>ros2 topic list</code> å‘½ä»¤å°†è¿”å›ç³»ç»Ÿä¸­å½“å‰æ´»åŠ¨çš„æ‰€æœ‰è¯é¢˜çš„åˆ—è¡¨:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/parameter_events
/rosout
/turtle1/cmd_vel
/turtle1/color_sensor
/turtle1/pose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ros2 topic list -t</code> è¿”å›ç›¸åŒçš„è¯é¢˜åˆ—è¡¨ï¼Œè¿™æ¬¡åœ¨æ‹¬å·ä¸­é™„åŠ äº†è¯é¢˜ç±»å‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/parameter_events <span class="token punctuation">[</span>rcl_interfaces/msg/ParameterEvent<span class="token punctuation">]</span>
/rosout <span class="token punctuation">[</span>rcl_interfaces/msg/Log<span class="token punctuation">]</span>
/turtle1/cmd_vel <span class="token punctuation">[</span>geometry_msgs/msg/Twist<span class="token punctuation">]</span>
/turtle1/color_sensor <span class="token punctuation">[</span>turtlesim/msg/Color<span class="token punctuation">]</span>
/turtle1/pose <span class="token punctuation">[</span>turtlesim/msg/Pose<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ros2-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ros2-æœåŠ¡" aria-hidden="true">#</a> ROS2 æœåŠ¡</h3><p>æœåŠ¡æ˜¯ ROS å›¾ä¸­èŠ‚ç‚¹çš„å¦ä¸€ç§é€šè®¯æ–¹æ³•ã€‚æœåŠ¡åŸºäºè°ƒç”¨å’Œå“åº”æ¨¡å‹ï¼Œè€Œä¸æ˜¯è¯é¢˜çš„å‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å‹ã€‚è€Œè¯é¢˜å…è®¸èŠ‚ç‚¹è®¢é˜…æ•°æ®æµå¾—åˆ°ä¸æ–­æ›´æ–°ï¼ŒæœåŠ¡å¯¹å…·ä½“è°ƒç”¨çš„å®¢æˆ·ç«¯æä¾›æ•°æ®ã€‚</p><p>è¿˜æ˜¯ç°åœ¨ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«è¿è¡Œ <code>ros2 run turtlesim turtlesim_node</code> <code>ros2 run turtlesim turtle_teleop_key</code></p><h4 id="æœåŠ¡åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡åˆ—è¡¨" aria-hidden="true">#</a> æœåŠ¡åˆ—è¡¨</h4><p>åœ¨æ–°ç»ˆç«¯ä¸­è¿è¡Œ ros2 service list å‘½ä»¤å°†è¿”å›ç³»ç»Ÿä¸­å½“å‰æ´»åŠ¨çš„æ‰€æœ‰æœåŠ¡çš„åˆ—è¡¨: [å¾…æ ¡å‡†@8188]</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/clear
/kill
/reset
/spawn
/teleop_turtle/describe_parameters
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä½ å°†ä¼šçœ‹åˆ°ä¸¤ä¸ªèŠ‚ç‚¹éƒ½æœ‰ç›¸åŒçš„å…­ä¸ªæœåŠ¡ï¼Œå®ƒä»¬çš„åå­—ä¸­æœ‰ <code>parameters</code> ã€‚å‡ ä¹ ROS 2 ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è¿™äº›æ„å»ºå‚æ•°çš„åŸºç¡€è®¾æ–½æœåŠ¡ã€‚</p></blockquote><p>å¯ä»¥çœ‹åˆ° turtlesimç‰¹å®šæœåŠ¡ï¼Œ <code>/clear</code>, <code>/kill</code>, <code>/reset</code>, <code> spawn</code>, <code>/turtle1/set_pen</code>, <code>/turtle1/teleport_absolute</code>, <code>/turtle1/teleport_relative</code></p><h3 id="ros2-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ros2-å‚æ•°" aria-hidden="true">#</a> ROS2 å‚æ•°</h3><h3 id="ros2-åŠ¨ä½œ" tabindex="-1"><a class="header-anchor" href="#ros2-åŠ¨ä½œ" aria-hidden="true">#</a> ROS2 åŠ¨ä½œ</h3><h2 id="åˆ›å»º-ros-åŒ…" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-ros-åŒ…" aria-hidden="true">#</a> åˆ›å»º ROS åŒ…</h2><p>åŒ…å¯ä»¥è¢«è§†ä¸º ROS2 ä»£ç çš„å®¹å™¨ã€‚å¦‚æœä½ æƒ³å®‰è£…ä½ çš„ä»£ç æˆ–è€…ä¸å…¶ä»–äººå…±äº«ï¼Œé‚£ä¹ˆä½ éœ€è¦æŠŠå®ƒç»„ç»‡æˆä¸€ä¸ªåŒ…ã€‚</p><p>ä½¿ç”¨ CMake æˆ– Python åˆ›å»ºä¸€ä¸ªæ–°åŒ…ï¼Œå¹¶è¿è¡Œå…¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>ROS2 ä¸­çš„åŒ…åˆ›å»ºä½¿ç”¨ ament ä½œä¸ºå…¶æ„å»ºç³»ç»Ÿï¼Œcolcon ä½œä¸ºå…¶æ„å»ºå·¥å…·ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®˜æ–¹æ”¯æŒçš„ CMake æˆ– Python åˆ›å»ºåŒ…ï¼Œå°½ç®¡ç¡®å®å­˜åœ¨å…¶ä»–æ„å»ºç±»å‹ã€‚</p><p>å·¥ä½œåŒºä¸­åŒ…çš„ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>workspace_folder <span class="token comment"># è¿™é‡ŒæŒ‡ç›®å½•ä¸‹ ros</span>
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ package_1 <span class="token comment"># åŸºäº CMake çš„åŒ…</span>
â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â”‚   â””â”€â”€ package.xml
â”‚   â”œâ”€â”€ package_2 <span class="token comment"># åŸºäº Python çš„åŒ…</span>
â”‚   â”‚   â”œâ”€â”€ setup.py
â”‚   â”‚   â”œâ”€â”€ package.xml
â”‚   â”‚   â”œâ”€â”€ package_2
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ publisher_member_function.py
â”‚   â”‚   â”‚   â””â”€â”€ <span class="token punctuation">..</span>.
â”‚   â”‚   â””â”€â”€ resource/package_2
â”‚   â””â”€â”€ <span class="token punctuation">..</span>.
â””â”€â”€ <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥éœ€è¦åˆ›å»ºåŒ…ï¼Œæ„å»ºç±»å‹æœ‰ <code>cmake</code>, <code>ament_cmake</code>, <code>ament_python</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_python  <span class="token operator">&lt;</span>pack_name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-python" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-python" aria-hidden="true">#</a> ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (Python)</h3><p>åˆ›å»ºåä¸º <code>py_pubsub</code> çš„åŒ…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_python py_pubsub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾—åˆ°å¦‚ä¸‹å†…å®¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>package_2 <span class="token comment"># åŸºäº Python çš„åŒ…</span>
â”œâ”€â”€ setup.py
â”œâ”€â”€ package.xml
â””â”€â”€ package_2
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ publisher_member_function.py    <span class="token comment"># åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œå‘å¸ƒè€…</span>
    â”œâ”€â”€ subscriber_member_function.py   <span class="token comment"># åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œè®¢é˜…è€…</span>
    â””â”€â”€ <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- http://dev.ros2.fishros.com/doc/Tutorials/Writing-A-Simple-Py-Publisher-And-Subscriber.html --><p>åœ¨æ„å»ºä¹‹å‰ï¼Œåœ¨å·¥ä½œåŒºçš„<strong>æ ¹ç›®å½•</strong>ä¸‹è¿è¡Œ rosdep ï¼Œä»¥æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ä¾èµ–é¡¹:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rosdep <span class="token function">install</span> <span class="token parameter variable">-i</span> --from-path src <span class="token parameter variable">--rosdistro</span> foxy <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»ç„¶åœ¨ä½ çš„å·¥ä½œç©ºé—´çš„æ ¹ï¼Œå»ºç«‹ä½ çš„æ–°çš„åŒ…:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select py_pubsub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«æ¿€æ´»ç¯å¢ƒå¹¶ä¸”è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run py_pubsub talker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run py_pubsub listener
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-c" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ…-c" aria-hidden="true">#</a> ç¼–å†™å‘å¸ƒå’Œè®¢é˜…åŒ… (C++)</h3><p>åˆ›å»ºåä¸º <code>cpp_pubsub</code> çš„åŒ…ï¼Œä½¿ç”¨ <code>ament_cmake</code> æ„å»ºç±»å‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_cmake cpp_pubsub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨åŒ… <code>cpp_pubsub</code> ç›®å½•ä¸‹æ·»åŠ  <code>src/publisher_member_function.cpp</code> å’Œ <code>src/subscriber_member_function.cpp</code> æ–‡ä»¶ï¼Œä»¥åŠ <code>CMakeLists.txt</code> æ–‡ä»¶ï¼Œæ·»åŠ åŒ…ä¾èµ–</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">find_package</span><span class="token punctuation">(</span>rclcpp REQUIRED<span class="token punctuation">)</span>   <span class="token comment"># æ·»åŠ ä¾èµ–</span>
<span class="token keyword">find_package</span><span class="token punctuation">(</span>std_msgs REQUIRED<span class="token punctuation">)</span> <span class="token comment"># æ·»åŠ ä¾èµ–</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>ament_package()</code> ä¹‹å‰æ·»åŠ ç¼–è¯‘èŠ‚ç‚¹å¯æ‰§è¡Œæ–‡ä»¶</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token comment"># [Node] talker : ç¼–è¯‘ é“¾æ¥ROS å®‰è£…</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>talker <span class="token comment"># å¯æ‰§è¡Œæ–‡ä»¶åï¼Œä¹Ÿå°±æ˜¯èŠ‚ç‚¹(è¿è¡Œçš„æ–‡ä»¶)å</span>
  src/publisher_member_function.cpp <span class="token comment"># æºæ–‡ä»¶</span>
<span class="token punctuation">)</span>
<span class="token comment"># target_link_libraries(video_reader ${OpenCV_LIBRARIES}) # å¦‚æœæœ‰</span>
<span class="token function">ament_target_dependencies</span><span class="token punctuation">(</span>talker
  rclcpp    <span class="token comment"># æ·»åŠ  ROS åŒ…: rclcpp</span>
  std_msgs  <span class="token comment"># æ·»åŠ  ROS åŒ…: std_msgs</span>
<span class="token punctuation">)</span>
<span class="token keyword">install</span><span class="token punctuation">(</span>TARGETS     talker              <span class="token comment"># å®‰è£…çš„å¯æ‰§è¡Œæ–‡ä»¶</span>
        DESTINATION lib/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span> <span class="token comment"># å®‰è£…çš„ä½ç½®</span>
<span class="token punctuation">)</span>

<span class="token comment"># [Node] listener : ç¼–è¯‘ é“¾æ¥ROS å®‰è£…</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>listener src/subscriber_member_function.cpp<span class="token punctuation">)</span>
<span class="token function">ament_target_dependencies</span><span class="token punctuation">(</span>listener rclcpp std_msgs<span class="token punctuation">)</span>
<span class="token keyword">install</span><span class="token punctuation">(</span>TARGETS listener DESTINATION lib/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¯‘</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select cpp_pubsub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«æ¿€æ´»ç¯å¢ƒå¹¶ä¸”è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run cpp_pubsub talker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run cpp_pubsub listener
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-python" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-python" aria-hidden="true">#</a> ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (Python)</h3><p>åˆ›å»ºåä¸º <code>py_srvcli</code> çš„åŒ…ï¼Œå¹¶ä¸”æ·»åŠ ä¾èµ– <code>rclpy</code> å’Œ <code>example_interfaces</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create py_srvcli <span class="token punctuation">\</span>
    --build-type ament_python <span class="token punctuation">\</span>
    <span class="token parameter variable">--dependencies</span> rclpy example_interfaces
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæ—¶ï¼Œæ·»åŠ åŒ…çš„ç›¸å…³ä¿¡æ¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create py_srvcli <span class="token punctuation">\</span>
    --build-type ament_python <span class="token punctuation">\</span>
    <span class="token parameter variable">--dependencies</span> rclpy example_interfaces <span class="token punctuation">\</span>
    <span class="token parameter variable">--description</span> py_srvcli <span class="token punctuation">\</span>
    --maintainer-email <span class="token string">&quot;example_email@gmail.com&quot;</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">--license</span> <span class="token string">&quot;Apache License 2.0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>src/py_srvcli/py_srvcli</code> ç›®å½•ä¸‹åˆ›å»ºæœåŠ¡ç«¯æ–‡ä»¶ <a href="../src/py_srvcli/py_srvcli/service_member_function.py"><code>service_member_function.py</code></a> å’Œå®¢æˆ·ç«¯æ–‡ä»¶ <code>client_member_function.py</code></p><p>ç„¶ååœ¨ <code>src/py_srvcli/setup.py</code> ä¸­æ·»åŠ å…¥å£èµ·ç‚¹</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>entry_points<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token string">&#39;console_scripts&#39;</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
      <span class="token string">&#39;service = py_srvcli.service_member_function:main&#39;</span><span class="token punctuation">,</span>
      <span class="token string">&#39;client = py_srvcli.client_member_function:main&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ ¹ç›®å½•ä¸‹æ„å»º <code>py_srvcli</code> åŒ…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select py_srvcli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«æ¿€æ´»ç¯å¢ƒå¹¶ä¸”è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run py_srvcli <span class="token function">service</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 run py_srvcli client <span class="token number">2</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-c" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ…-c" aria-hidden="true">#</a> ç¼–å†™æœåŠ¡å’Œå®¢æˆ·ç«¯åŒ… (C++)</h3><p>ä½¿ç”¨ C++ åˆ›å»ºå’Œè¿è¡Œ<strong>æœåŠ¡</strong>å’Œ<strong>å®¢æˆ·ç«¯</strong>èŠ‚ç‚¹ã€‚å½“ <code>nodes</code> ä½¿ç”¨ <code>services</code> è¿›è¡Œé€šä¿¡æ—¶ï¼Œ<strong>å‘é€æ•°æ®è¯·æ±‚çš„èŠ‚ç‚¹</strong>è¢«è°ƒç”¨åˆ°<strong>å®¢æˆ·ç«¯èŠ‚ç‚¹</strong>ï¼Œ<strong>å“åº”è¯·æ±‚çš„èŠ‚ç‚¹</strong>æ˜¯<strong>æœåŠ¡èŠ‚</strong>ç‚¹ã€‚è¯·æ±‚å’Œå“åº”çš„ç»“æ„ç”± <code>.srv</code> æ–‡ä»¶å†³å®šã€‚</p><p>åˆ›å»ºæ–°åŒ… <code>custom_interfaces</code>ï¼Œä½¿ç”¨ <code>ament_cmake</code> æ„å»ºç±»å‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_cmake cpp_srvcli <span class="token punctuation">\</span>
    <span class="token parameter variable">--dependencies</span> rclcpp custom_interfaces
<span class="token comment"># ä¾èµ–äºåˆšæ‰ä½¿ç”¨è¿‡çš„ custom_interfaces åŒ…    </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>custom_interfaces</code> åŒ…å†…åŒ…å« <code>AddTwoInts.srv</code> æ–‡ä»¶ï¼Œå‰ä¸¤è¡Œæ˜¯è¯·æ±‚çš„å‚æ•°ï¼Œç ´æŠ˜å·ä¸‹é¢æ˜¯å“åº”ã€‚</p><div class="language-srv line-numbers-mode" data-ext="srv"><pre class="language-srv"><code>int64 a
int64 b
---
int64 sum
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>cpp_srvcli</code> åŒ…å†…ï¼Œåˆ›å»º <code>src/add_two_ints_server.cpp</code></p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;rclcpp/rclcpp.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;custom_interfaces/srv/add_two_ints.hpp&quot;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token double-colon punctuation">::</span>Request<span class="token operator">&gt;</span> request<span class="token punctuation">,</span>
         std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token double-colon punctuation">::</span>Response<span class="token operator">&gt;</span> response<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    response<span class="token operator">-&gt;</span>sum <span class="token operator">=</span> request<span class="token operator">-&gt;</span>a <span class="token operator">+</span> request<span class="token operator">-&gt;</span>b<span class="token punctuation">;</span>
    <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Incoming request\na: %ld b: %ld&quot;</span><span class="token punctuation">,</span> request<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> request<span class="token operator">-&gt;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;sending back response: [%ld]&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">int</span><span class="token punctuation">)</span>response<span class="token operator">-&gt;</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ROS2 c clientå®¢æˆ·ç«¯åº“</span>

    <span class="token comment">// åˆ›å»ºä¸€ä¸ªåä¸º add_two_ints_server çš„èŠ‚ç‚¹</span>
    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>rclcpp<span class="token double-colon punctuation">::</span>Node<span class="token operator">&gt;</span> node <span class="token operator">=</span> rclcpp<span class="token double-colon punctuation">::</span><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">make_shared</span><span class="token punctuation">(</span><span class="token string">&quot;add_two_ints_server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¸ºè¯¥èŠ‚ç‚¹åˆ›å»ºåä¸º add_two_ints çš„æœåŠ¡ï¼Œå¹¶è‡ªåŠ¨è°ƒç”¨yä½¿ç”¨ â€œ&amp; addâ€ æ–¹æ³•åœ¨ç½‘ç»œä¸Šå‘å¸ƒè¯¥æœåŠ¡</span>
    rclcpp<span class="token double-colon punctuation">::</span>Service<span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>SharedPtr service <span class="token operator">=</span>
        node<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">create_service</span><span class="token generic class-name"><span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;add_two_ints&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Ready to add two ints.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ—‹è½¬èŠ‚ç‚¹ï¼Œä½¿æœåŠ¡å¯ç”¨</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¾‘å®¢æˆ·ç«¯èŠ‚æºç  <code>add_two_ints_client.cpp</code></p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;rclcpp/rclcpp.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;custom_interfaces/srv/add_two_ints.hpp&quot;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;chrono&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token double-colon punctuation">::</span>chrono_literals<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">!=</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;usage: add_two_ints_client X Y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// ä¸æœåŠ¡èŠ‚ç‚¹ç±»ä¼¼ï¼Œä»¥ä¸‹ä»£ç è¡Œåˆ›å»ºèŠ‚ç‚¹ï¼Œç„¶åä¸ºè¯¥èŠ‚ç‚¹åˆ›å»ºå®¢æˆ·ç«¯:</span>
    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>rclcpp<span class="token double-colon punctuation">::</span>Node<span class="token operator">&gt;</span> node <span class="token operator">=</span> rclcpp<span class="token double-colon punctuation">::</span><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">make_shared</span><span class="token punctuation">(</span><span class="token string">&quot;add_two_ints_client&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rclcpp<span class="token double-colon punctuation">::</span>Client<span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>SharedPtr client <span class="token operator">=</span>
        node<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">create_client</span><span class="token generic class-name"><span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;add_two_ints&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ¥ä¸‹æ¥ï¼Œåˆ›å»ºè¯·æ±‚ã€‚å®ƒçš„ç»“æ„æ˜¯ç”±å‰é¢æåˆ°çš„ .srv æ–‡ä»¶å®šä¹‰çš„ã€‚</span>
    <span class="token keyword">auto</span> request <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>custom_interfaces<span class="token double-colon punctuation">::</span>srv<span class="token double-colon punctuation">::</span>AddTwoInts<span class="token double-colon punctuation">::</span>Request<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token operator">-&gt;</span>a <span class="token operator">=</span> <span class="token function">atoll</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token operator">-&gt;</span>b <span class="token operator">=</span> <span class="token function">atoll</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// while å¾ªç¯ç»™å®¢æˆ·ç«¯1ç§’é’Ÿæœç´¢ç½‘ç»œä¸­çš„æœåŠ¡èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå®ƒå°†ç»§ç»­ç­‰å¾…ã€‚</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>client<span class="token operator">-&gt;</span><span class="token function">wait_for_service</span><span class="token punctuation">(</span><span class="token number">1</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå®¢æˆ·ç«¯è¢«å–æ¶ˆ (ä¾‹å¦‚ï¼Œé€šè¿‡æ‚¨åœ¨ç»ˆç«¯ä¸­è¾“å…¥ â€œctrl + câ€)ï¼Œå®ƒå°†è¿”å›ä¸€æ¡é”™è¯¯æ—¥å¿—æ¶ˆæ¯ï¼Œè¯´æ˜å®ƒè¢«ä¸­æ–­äº†ã€‚</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">RCLCPP_ERROR</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Interrupted while waiting for the service. Exiting.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;service not available, waiting again...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç„¶åï¼Œå®¢æˆ·ç«¯å‘é€å…¶è¯·æ±‚ï¼ŒèŠ‚ç‚¹æ—‹è½¬ç›´åˆ°æ”¶åˆ°å“åº”æˆ–å¤±è´¥ã€‚</span>

    <span class="token keyword">auto</span> result <span class="token operator">=</span> client<span class="token operator">-&gt;</span><span class="token function">async_send_request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Wait for the result.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">spin_until_future_complete</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">==</span> rclcpp<span class="token double-colon punctuation">::</span>FutureReturnCode<span class="token double-colon punctuation">::</span>SUCCESS<span class="token punctuation">)</span>
        <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Sum: %ld&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token function">RCLCPP_ERROR</span><span class="token punctuation">(</span>rclcpp<span class="token double-colon punctuation">::</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token string">&quot;rclcpp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Failed to call service add_two_ints&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¾‘ <code>CMakeLists.txt</code> ï¼Œ</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span>
<span class="token keyword">project</span><span class="token punctuation">(</span>cpp_srvcli<span class="token punctuation">)</span>

<span class="token comment"># Default to C99</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> <span class="token variable">CMAKE_C_STANDARD</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_C_STANDARD</span> <span class="token number">99</span><span class="token punctuation">)</span>
<span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Default to C++14</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> <span class="token variable">CMAKE_CXX_STANDARD</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">14</span><span class="token punctuation">)</span>
<span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_COMPILER_IS_GNUCXX</span> <span class="token operator">OR</span> <span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> <span class="token string">&quot;Clang&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">add_compile_options</span><span class="token punctuation">(</span>-Wall -Wextra -Wpedantic<span class="token punctuation">)</span>
<span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># find dependencies</span>
<span class="token keyword">find_package</span><span class="token punctuation">(</span>ament_cmake REQUIRED<span class="token punctuation">)</span>
<span class="token keyword">find_package</span><span class="token punctuation">(</span>rclcpp REQUIRED<span class="token punctuation">)</span>
<span class="token keyword">find_package</span><span class="token punctuation">(</span>custom_interfaces REQUIRED<span class="token punctuation">)</span>

<span class="token comment"># [Node] server : ç¼–è¯‘ã€é“¾æ¥ã€å®‰è£…</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>server src/add_two_ints_server.cpp<span class="token punctuation">)</span>
<span class="token function">ament_target_dependencies</span><span class="token punctuation">(</span>server rclcpp custom_interfaces<span class="token punctuation">)</span>
<span class="token keyword">install</span><span class="token punctuation">(</span>TARGETS server DESTINATION lib/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># [Node] client : ç¼–è¯‘ã€é“¾æ¥ã€å®‰è£…</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>client src/add_two_ints_client.cpp<span class="token punctuation">)</span>
<span class="token function">ament_target_dependencies</span><span class="token punctuation">(</span>client rclcpp custom_interfaces<span class="token punctuation">)</span>
<span class="token keyword">install</span><span class="token punctuation">(</span>TARGETS client DESTINATION lib/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">ament_package</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select cpp_srvcli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡ŒæœåŠ¡èŠ‚ç‚¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> install/setup.bash
ros2 run cpp_srvcli server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼Œç»™ä¸¤ä¸ªæ•°ä½œä¸ºå‚æ•°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> install/setup.bash
ros2 run cpp_srvcli client <span class="token number">2</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰æ¥å£-msg-srv" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ¥å£-msg-srv" aria-hidden="true">#</a> è‡ªå®šä¹‰æ¥å£ msg srv</h3><p>è‡ªå®šä¹‰æ¥å£æ–‡ä»¶ ( <code>.msg</code> å’Œ <code>.srv</code> )ï¼Œå¹¶å°†å…¶ä¸ Python å’Œ C++ èŠ‚ç‚¹ä¸€èµ·ä½¿ç”¨</p><p>åˆ›å»ºæ–°åŒ… <code>custom_interfaces</code>ï¼Œä½¿ç”¨ <code>ament_cmake</code> æ„å»ºç±»å‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_cmake custom_interfaces
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>custom_interfaces</code> ç›®å½• (å’ŒåŒ…åŒçº§ç›®å½•) ä¸‹åˆ›å»º <code>msg</code> å’Œ <code>srv</code> æ–‡ä»¶å¤¹ï¼Œåˆ›å»º <code>msg/Num.msg</code> å’Œ <code>srv/AddTwoInts.srv</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> custom_interfaces
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> msg <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> srv
<span class="token function">touch</span> msg/Num.msg <span class="token operator">&amp;&amp;</span> <span class="token function">touch</span> srv/AddTwoInts.srv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>Num.msg</code> ä¸­å£°æ˜å…¶æ•°æ®ç»“æ„ã€‚è¿™æ˜¯è‡ªå®šä¹‰æ¶ˆæ¯ï¼Œç”¨äºä¼ è¾“ <code>num</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>int64 num
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ <code>AddTwoInts.srv</code> ä¸­å£°æ˜å…¶æ•°æ®ç»“æ„ã€‚è¿™æ˜¯è‡ªå®šä¹‰æœåŠ¡ï¼Œç”¨äºä¼ è¾“ <code>a</code> å’Œ <code>b</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>int64 a
int64 b
---
int64 <span class="token function">sum</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>CMakeLists.txt</code> ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">find_package</span><span class="token punctuation">(</span>rosidl_default_generators REQUIRED<span class="token punctuation">)</span>
<span class="token function">rosidl_generate_interfaces</span><span class="token punctuation">(</span><span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>
  <span class="token string">&quot;srv/AddTwoInts.srv&quot;</span>
  <span class="token string">&quot;msg/Num.msg&quot;</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæ¥å£ä¾èµ–äº <code>rosidl_default_generators</code> æ¥ç”Ÿæˆç‰¹å®šäºè¯­è¨€çš„ä»£ç ï¼Œæ‰€ä»¥æ‚¨éœ€è¦å£°æ˜å¯¹å®ƒçš„ä¾èµ–ï¼Œåœ¨ <code>package.xml</code> ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ã€‚</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>rosidl_default_generators<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>rosidl_default_runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>member_of_group</span><span class="token punctuation">&gt;</span></span>rosidl_interface_packages<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>member_of_group</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»º <code>custom_interfaces</code> åŒ…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select custom_interfaces
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åï¼Œç°åœ¨è¿™äº›æ¥å£å°†è¢«å…¶ä»– ROS2 åŒ…å‘ç°å¹¶ä½¿ç”¨</p><p>é€šè¿‡ä½¿ç”¨ <code>ros2 interface show </code>å‘½ä»¤ç¡®è®¤æ‚¨çš„æ¥å£åˆ›å»ºæœ‰æ•ˆ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> install/setup.bash
ros2 interface show custom_interfaces/msg/Num
ros2 interface show custom_interfaces/srv/AddTwoInts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹ <code>py_pubsub</code> åŒ…ï¼Œæ·»åŠ ä¾èµ– <code>custom_interfaces</code>ï¼Œå¹¶ä¸”ä¿®æ”¹ <code>publisher_member_function.py</code> å’Œ <code>subscriber_member_function.py</code> æ–‡ä»¶ï¼Œä»¥åŠ <code>setup.py</code> æ–‡ä»¶</p><h3 id="è‡ªå®šä¹‰å‚æ•°-python" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å‚æ•°-python" aria-hidden="true">#</a> è‡ªå®šä¹‰å‚æ•° (Python)</h3><p>ä½¿ç”¨ Python (rclpy) åˆ›å»ºå¹¶è¿è¡Œå…·æœ‰ROSå‚æ•°çš„ç±»ã€‚å½“ä½ åˆ¶ä½œè‡ªå·±çš„ nodes æ—¶ï¼Œä½ æœ‰æ—¶éœ€è¦æ·»åŠ å¯ä»¥ä»launchæ–‡ä»¶ä¸­è®¾ç½®çš„å‚æ•°ã€‚</p><h3 id="è‡ªå®šä¹‰å‚æ•°-c" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å‚æ•°-c" aria-hidden="true">#</a> è‡ªå®šä¹‰å‚æ•° (C++)</h3><p>åˆ›å»ºå¹¶è¿è¡Œå…·æœ‰ ROS å‚æ•°çš„ç±»ã€‚æœ‰æ—¶èŠ‚ç‚¹åœ¨è¿è¡Œå‰éœ€è¦ä» launch æ–‡ä»¶ä¸­è®¾ç½®çš„å‚æ•°ã€‚</p><p>åˆ›å»ºåŒ… <code>cpp_parameters</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> src
ros2 pkg create --build-type ament_cmake cpp_parameters <span class="token parameter variable">--dependencies</span> rclcpp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨åŒ…ç›®å½• <code>src/cpp_parameters</code> ä¸‹åˆ›å»º <code>src/cpp_parameters_node.cpp</code></p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;rclcpp/rclcpp.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;chrono&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;functional&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token double-colon punctuation">::</span>chrono_literals<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ParametersClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> rclcpp<span class="token double-colon punctuation">::</span><span class="token class-name">Node</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>string parameter_string_<span class="token punctuation">;</span>
    rclcpp<span class="token double-colon punctuation">::</span>TimerBase<span class="token double-colon punctuation">::</span>SharedPtr timer_<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ParametersClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token string">&quot;parameter_node&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºæˆ‘ä»¬çš„å‚æ•°ã€‚æˆ‘ä»¬çš„å‚æ•°åä¸º my_parameter ï¼Œå¹¶è¢«æŒ‡å®šä¸ºé»˜è®¤å€¼ world</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">declare_parameter</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;my_parameter&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// timer_ åˆå§‹åŒ–ï¼Œè¿™å¯¼è‡´ respond å‡½æ•°æ¯ç§’æ‰§è¡Œä¸€æ¬¡</span>
        timer_ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">create_wall_timer</span><span class="token punctuation">(</span><span class="token number">1000</span>ms<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ParametersClass<span class="token double-colon punctuation">::</span>respond<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// respond å‡½æ•°çš„ç¬¬ä¸€è¡Œä»èŠ‚ç‚¹è·å–å‚æ•° my_parameter ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ parameter_string_ ä¸­</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">get_parameter</span><span class="token punctuation">(</span><span class="token string">&quot;my_parameter&quot;</span><span class="token punctuation">,</span> parameter_string_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RCLCPP_INFO</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">get_logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello %s&quot;</span><span class="token punctuation">,</span> parameter_string_<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>ParametersClass<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â€œrclcpp:: spinâ€ å¼€å§‹å¤„ç†æ¥è‡ªèŠ‚ç‚¹çš„æ•°æ®ã€‚</span>
    rclcpp<span class="token double-colon punctuation">::</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>CMakeLists.txt</code> æ–‡ä»¶</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">add_executable</span><span class="token punctuation">(</span>parameter_node src/cpp_parameters_node.cpp<span class="token punctuation">)</span>
<span class="token function">ament_target_dependencies</span><span class="token punctuation">(</span>parameter_node rclcpp<span class="token punctuation">)</span>

<span class="token keyword">install</span><span class="token punctuation">(</span>TARGETS
  parameter_node
  DESTINATION lib/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build --packages-select cpp_parameters
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡ŒèŠ‚ç‚¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> install/setup.bash
ros2 run cpp_parameters parameter_node
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡ŒèŠ‚ç‚¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> install/setup.bash
<span class="token comment"># æŸ¥çœ‹å‚æ•°</span>
ros2 param list
<span class="token comment"># ä¿®æ”¹å‚æ•°</span>
ros2 param <span class="token builtin class-name">set</span> /parameter_node my_parameter earth
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡ launch æ–‡ä»¶ä¿®æ”¹ï¼Œåœ¨åŒ…ç›®å½• <code>cpp_parameters</code> ä¸‹åˆ›å»º <code>launch/cpp_parameters_launch.py</code></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> launch <span class="token keyword">import</span> LaunchDescription
<span class="token keyword">from</span> launch_ros<span class="token punctuation">.</span>actions <span class="token keyword">import</span> Node

<span class="token keyword">def</span> <span class="token function">generate_launch_description</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> LaunchDescription<span class="token punctuation">(</span><span class="token punctuation">[</span>
        Node<span class="token punctuation">(</span>
            package<span class="token operator">=</span><span class="token string">&quot;cpp_parameters&quot;</span><span class="token punctuation">,</span>
            executable<span class="token operator">=</span><span class="token string">&quot;parameter_node&quot;</span><span class="token punctuation">,</span>
            name<span class="token operator">=</span><span class="token string">&quot;custom_parameter_node&quot;</span><span class="token punctuation">,</span>
            output<span class="token operator">=</span><span class="token string">&quot;screen&quot;</span><span class="token punctuation">,</span>
            emulate_tty<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            parameters<span class="token operator">=</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span><span class="token string">&quot;my_parameter&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;earth&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>CMakeLists.txt</code> æ–‡ä»¶æ·»åŠ </p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">install</span><span class="token punctuation">(</span>DIRECTORY launch
        DESTINATION share/<span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡ŒèŠ‚ç‚¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> install/setup.bash
ros2 launch cpp_parameters cpp_parameters_launch.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¯åŠ¨æ–‡ä»¶-launch" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨æ–‡ä»¶-launch" aria-hidden="true">#</a> å¯åŠ¨æ–‡ä»¶ launch</h2><p>ROS2 ä¸­æä¾›äº† launch æ¨¡å—ç”¨äºå®ç°èŠ‚ç‚¹çš„æ‰¹é‡å¯åŠ¨</p><p>å‚è€ƒï¼šhttps://www.wolai.com/kachex/9Cd3RkqmuNMRxu9HVB2YRz</p><p>åˆ›å»ºä¸€ä¸ª <code>py_launch</code> çš„åŒ…ç”¨äºæ‰¹é‡å¯åŠ¨èŠ‚ç‚¹ã€‚å¹¶åœ¨æ–°å»ºçš„åŒ… <code>py_launch</code> çš„ç›®å½•ä¸‹ï¼Œåˆ›å»º <code>launch</code> ç›®å½• åœ¨ ros</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ros2 pkg create py_launch --build-type ament_python <span class="token parameter variable">--dependencies</span> rclpy
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> py_launch/launch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>py_launch/launch</code> ç›®å½•ä¸‹åˆ›å»º launch æ–‡ä»¶</p><p><strong>python æ–‡ä»¶</strong>ï¼š<code>py_all_nodes.launch.py</code></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> launch <span class="token keyword">import</span> LaunchDescription
<span class="token keyword">from</span> launch_ros<span class="token punctuation">.</span>actions <span class="token keyword">import</span> Node
    video_reader <span class="token operator">=</span> Node<span class="token punctuation">(</span>package<span class="token operator">=</span><span class="token string">&quot;py_video&quot;</span><span class="token punctuation">,</span> executable<span class="token operator">=</span><span class="token string">&quot;video_reader&quot;</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> LaunchDescription<span class="token punctuation">(</span><span class="token punctuation">[</span>video_reader<span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#  å¯ä»¥æ·»åŠ å¤šä¸ªèŠ‚ç‚¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>xml æ–‡ä»¶ï¼š</strong><code>py_all_nodes.launch.xml</code></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>turtlesim<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exec</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>turtlesim_node<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>turtlesim<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exec</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>turtlesim_node<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>yaml æ–‡ä»¶ï¼š</strong><code>py_all_nodes.launch.yaml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">launch</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">node</span><span class="token punctuation">:</span>
    <span class="token key atrule">pkg</span><span class="token punctuation">:</span> <span class="token string">&quot;turtlesim&quot;</span>
    <span class="token key atrule">exec</span><span class="token punctuation">:</span> <span class="token string">&quot;turtlesim_node&quot;</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;t1&quot;</span>
<span class="token punctuation">-</span> <span class="token key atrule">node</span><span class="token punctuation">:</span>
    <span class="token key atrule">pkg</span><span class="token punctuation">:</span> <span class="token string">&quot;turtlesim&quot;</span>
    <span class="token key atrule">exec</span><span class="token punctuation">:</span> <span class="token string">&quot;turtlesim_node&quot;</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;t2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»ºã€è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>colcon build
<span class="token builtin class-name">.</span> install/setup.bash
ros2 launch py_launch py_all_nodes.launch.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 296506195@qq.com">HenryZhuHR</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/ros2-development/assets/app-706704df.js" defer></script>
  </body>
</html>
